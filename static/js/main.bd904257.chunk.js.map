{"version":3,"sources":["components/Modal/Modal.module.css","components/api.jsx","components/Searchbar/Searchbar.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/Button/Button.jsx","components/Modal/Modal.jsx","components/Loader/Loader.jsx","components/App.jsx","index.js"],"names":["module","exports","fetchImages","imageTags","page","a","axios","get","response","data","hits","Searchbar","onSearch","className","onSubmit","e","preventDefault","target","elements","value","type","name","autoComplete","autoFocus","placeholder","ImageGalleryItem","webformatURL","largeImageURL","tags","handleSelectedImage","console","log","src","alt","onClick","ImageGallery","gallery","map","id","Button","handleLoadMore","modalRoot","document","querySelector","Modal","handleKeydown","code","props","onClose","handleBackdropClick","currentTarget","window","addEventListener","this","removeEventListener","createPortal","css","overlay","modal","children","Component","Load","color","height","width","timeout","App","state","requestStatus","showModal","handleFormSubmit","setState","toggleModal","_","prevState","length","toast","scrollTo","top","documentElement","scrollHeight","behavior","isLoading","showGallery","position","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.bd904257.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__3ssp4\",\"modal\":\"Modal_modal__1TgI2\"};","import axios from 'axios';\n\n// const API_KEY = '22578935-bf31ef834e5011bcd0b44501d';\n\n// axios.default.baseURL = 'https://pixabay.com/api/';\n\nexport const fetchImages = async (imageTags, page) => {\n  const response = await axios.get(\n    `https://pixabay.com/api/?key=22578935-bf31ef834e5011bcd0b44501d&q=${imageTags}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=12`,\n  );\n  return response.data.hits;\n};\n","export const Searchbar = ({ onSearch }) => {\n  const handleSearch = e => {\n    e.preventDefault();\n    onSearch(e.target.elements.imageTags.value);\n  };\n\n  return (\n    <header className=\"Searchbar\">\n      <form className=\"SearchForm\" onSubmit={handleSearch}>\n        <button type=\"submit\" className=\"SearchForm-button\">\n          <span className=\"SearchForm-button-label\">Search</span>\n        </button>\n\n        <input\n          className=\"SearchForm-input\"\n          name=\"imageTags\"\n          type=\"text\"\n          autoComplete=\"off\"\n          autoFocus\n          placeholder=\"Search images and photos\"\n        />\n      </form>\n    </header>\n  );\n};\n","export const ImageGalleryItem = ({\n  webformatURL,\n  largeImageURL,\n  imageTags,\n  tags,\n  handleSelectedImage,\n}) => {\n  // console.log(webformatURL );\n  // const { webformatURL, largeImageURL, tags, handleSelectedImage } = image;\n  console.log(handleSelectedImage);\n  return (\n    <li className=\"ImageGalleryItem\">\n      <img\n        src={webformatURL}\n        alt={tags}\n        className=\"ImageGalleryItem-image\"\n        onClick={() => handleSelectedImage(largeImageURL, imageTags)}\n      />\n    </li>\n  );\n};\n","import { ImageGalleryItem } from 'components/ImageGalleryItem/ImageGalleryItem';\n\nexport const ImageGallery = ({ gallery, handleSelectedImage }) => {\n  console.log(gallery.webformatURL);\n  return (\n    <ul>\n      {gallery.map(({ id, largeImageURL, webformatURL }) => (\n        <ImageGalleryItem\n          key={id}\n          largeImageURL={largeImageURL}\n          webformatURL={webformatURL}\n          handleSelectedImage={handleSelectedImage}\n        />\n      ))}\n    </ul>\n  );\n};\n","export const Button = ({ handleLoadMore }) => {\n  return (\n    <button type=\"button\" onClick={handleLoadMore}>\n      Load more\n    </button>\n  );\n};\n","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\n// import { ImageGalleryItem } from 'components/ImageGalleryItem/ImageGalleryItem';\nimport css from './Modal.module.css';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nexport class Modal extends Component {\n  // закрытие модалки по Esc\n  componentDidMount() {\n    console.log('ModalcomponentDidMount ');\n    window.addEventListener('keydown', this.handleKeydown);\n  }\n\n  componentWillUnmount() {\n    console.log('ModalcomponentWillMount ');\n    window.removeEventListener('keydown', this.handleKeydown);\n  }\n\n  handleKeydown = e => {\n    if (e.code === 'Escape') {\n      // console.log('esc')\n      this.props.onClose();\n    }\n  };\n\n  // Закрытие по клику на бэкдроп\n\n  handleBackdropClick = e => {\n    // console.log('currentTarget', e.currentTarget);\n    // console.log('target', e.target);\n    if (e.currentTarget === e.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    const { largeImageURL, tags } = this.props;\n    return createPortal(\n      <div className={css.overlay} onClick={this.handleBackdropClick}>\n        <div className={css.modal}>\n          {this.props.children}\n          <img src={largeImageURL} alt={tags} />\n        </div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n","import Loader from 'react-loader-spinner';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\n\nexport const Load = () => {\n  //other logic\n\n  return <Loader type=\"Rings\" color=\"#00BFFF\" height={80} width={80} timeout={3000} />;\n};\n","import { Component } from 'react';\nimport toast, { Toaster } from 'react-hot-toast';\nimport { fetchImages } from './api';\nimport { Searchbar } from 'components/Searchbar/Searchbar';\nimport { ImageGallery } from './ImageGallery/ImageGallery';\nimport { Button } from './Button/Button';\nimport { Modal } from './Modal/Modal';\nimport { Load } from './Loader/Loader';\n\n// import { ImageGalleryItem } from './ImageGalleryItem/ImageGalleryItem';\n\nexport class App extends Component {\n  state = {\n    imageTags: '',\n    page: 1,\n    gallery: [],\n    requestStatus: 'idle',\n    showModal: false,\n    largeImageURL: '',\n    tags: '',\n  };\n\n  //Делаем запись в state\n\n  handleFormSubmit = imageTags => {\n    this.setState({ page: 1, gallery: [], imageTags });\n  };\n\n  handleLoadMore = () => {\n    this.setState({ page: this.state.page + 1 });\n  };\n\n  // Управление модалкой\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n  };\n\n  handleSelectedImage = (largeImageURL, imageTags) => {\n    this.setState({ largeImageURL, imageTags });\n    this.toggleModal();\n  };\n\n  // Реакция на изменение state, делаем запросы\n  async componentDidUpdate(_, prevState) {\n    const { imageTags, page } = this.state;\n    if (prevState.imageTags !== imageTags || prevState.page !== page)\n      try {\n        this.setState({ requestStatus: 'pending' });\n        const gallery = await fetchImages(imageTags, page);\n        this.setState({\n          gallery: [...this.state.gallery, ...gallery],\n          requestStatus: 'resolved',\n        });\n        if (gallery.length === 0) {\n          return toast('Sorry, there are no images matching your search query. Please try again.');\n        }\n        this.setState({\n          gallery: [...this.state.gallery, ...gallery],\n        });\n      } catch (error) {\n        // this.setState({ requestStatus: 'rejected' });\n        // console.log('error');\n      }\n\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n  }\n\n  render() {\n    const { gallery, showModal, largeImageURL, imageTags, requestStatus } = this.state;\n    const isLoading = requestStatus === 'pending';\n    const showGallery = gallery.length > 0 && !isLoading;\n\n    return (\n      <div>\n        {showModal && (\n          <Modal onClose={this.toggleModal} largeImageURL={largeImageURL} alt={imageTags} />\n        )}\n        <Searchbar onSearch={this.handleFormSubmit} />\n        {isLoading && <Load />}\n        <ImageGallery gallery={gallery} handleSelectedImage={this.handleSelectedImage} />\n        {showGallery && <Button handleLoadMore={this.handleLoadMore} />}\n        <Toaster position=\"top-right\" />\n        {/* <ImageGalleryItem handleSelectedImage={this.toggleModal} /> */}\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { App } from './components/App';\n// import reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}